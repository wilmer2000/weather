<div class="container" [formGroup]="settingsForm">
  <mat-card appearance="outlined">
    <mat-card-content [formGroupName]="'location'">
      <h6>Location</h6>
      <mat-form-field class="w-100">
        <mat-label>Country</mat-label>
        <mat-select [formControlName]="'country'" (selectionChange)="onCountryChange($event)">
          @let countryList = countryList$ | async ;
          @if (countryList) {
            @for (country of countryList; track country.isoCode) {
              <mat-option [value]="country.isoCode">{{ country.isoCode }} - {{country.name}}</mat-option>
            }
          }
        </mat-select>
      </mat-form-field>

      <mat-form-field class="w-100">
        <mat-label>City</mat-label>
        <mat-select [formControlName]="'city'">
          @let citiesList = citiesList$ | async ;
          @if (citiesList) {
            @for (city of citiesList; track $index) {
              <mat-option [value]="city.name">{{city.name}}</mat-option>
            }
          }
        </mat-select>
      </mat-form-field>

    </mat-card-content>
  </mat-card>
  <mat-card class="mt-3" appearance="outlined">
    <mat-card-content>
      <h6>Language</h6>
      <mat-form-field class="w-100">
        <mat-label>Language</mat-label>
        <mat-select [formControlName]="'language'">
          @for (state of languages | keyvalue; track state) {
            <mat-option [value]="state.key">{{ state.key }} - {{state.value}}</mat-option>
          }
        </mat-select>
      </mat-form-field>
    </mat-card-content>
  </mat-card>
  <button class="mt-3" mat-flat-button (click)="save()">Save</button>
</div>
